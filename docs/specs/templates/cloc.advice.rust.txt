First, look for repetitive patterns that could be extracted into helper functions, or refactor to be more unit testable and concise.

Then split into sibling modules or submodules in a folder by semantic concern (target 160â€“260 lines each).

Avoid removing individual lines to satisfy the linter; prefer extracting testable code blocks.
